# 自动更新程序

* 自动更新程序 将程序文件放入需要控制的项目文件中 新建Update文件夹将本项目放入该文件夹 
* 用控制台的方式启动该项目.exe程序 启动前需要生成一次配置文件并写入配置 在启动项目时可以先执行该程序验证远端服务器是否有更新
* 可在项目中以控制台方式启动 或编写bat文件或其他文件启动项目
* 运行逻辑:运行本项目中的程序扫描远端服务器的文件包->服务器与本地文件版本是否一致->如果远端有新文件则差异化更新本地文件->更新完成后打开源项目(此处需要注意 如果有文件占用 则会引发异常推荐用bat等其他与项目无关的程序进行启动程序)

当前bug较多 类型仅支持github,ftp，闲时完善

| 参数 | 说明 |
| ------- | ------- |
|-i|初始化 生成配置文件|
|-s|服务器地址|
|-t|服务器类型|
|-r|过滤更新路径|
|-m|移除更新路径|
|-v|当前本地版本|
|-a|延时更新时长|
|-p|服务器文件路径|
|-h|生成对照文件|

i:生成空白配置文件 可以直接写参数 (!!!执行此操作时会重置配置文件!!!)  
t:服务器类型 github/ftp/  
s:服务器地址 github时输入内容({用户ID}/{仓库}/{分支}) 例: [-s 2607077992ZQ/autoupdate/master]  ftp文件服务器时分为两段写入:(-s {访问地址}@{用户名}#{密码})  
r:不需要更新的文件 (-i时自动添加update文件夹中所有文件 预防文件冲突)  
m:移除不需要更新的文件  
-v:本地版本号 可写可不写 用来对比本地与服务器端版本号  
-a:执行更新程序 定时器单位ms 0立即执行  
-p:服务器文件地址 如ftp服务器 写入更新目录存放地址 在根地址下写入"/"   
-h:生成hash文件对照表 在服务器类型为ftp时必须生成该文件 在windows服务器下在路径下执行该指令后 即生成更新文件  

[跳转测试站](https://github.com/2607077992ZQ/ProjectTest)